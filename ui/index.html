<!DOCTYPE html
><html>
<head>
<style>
@font-face {
  font-family: 'Almendra';
  src: url('/fonts/Almendra-Bold.ttf');
}
</style>
<script src="jquery.js"></script>
<script src="map.js"></script>
<script src="offers.js"></script>
<script src="source.js"></script>
<script src="player_stats.js"></script>
<script src="player_cards.js"></script>
<script src="player_units.js"></script>
<script src="play_area.js"></script>
<script>


var drawOffers = newOffers()

function drawGame(g) {

  var l = drawLand(g.land, g.player.name, g.player.unsafe)

  return { dom: $('<div/>')
                .attr('id','game')
                .append(drawPlayerStats(g.player, g.source, g.land.time))
                .append(drawPlayArea(g.playArea))
                .append(l.dom)
                .append(drawPlayerCards(g.player))
                .append(drawPlayerUnits(g.player))
                .append(drawOffers(g.offers))
        , focus: l.focus
        }
}

function redrawGame(g) {
  var l = drawGame(g)
  $('#game').replaceWith(l.dom)
  l.focus(g.player.location.x, g.player.location.y)
}


function testAll() {
  jQuery.get('/newGame', {}, redrawGame)
}



$(document).ready(function() {
  testAll();
});
</script>
</head>
<body><div id="game"></div></body>
</html>


